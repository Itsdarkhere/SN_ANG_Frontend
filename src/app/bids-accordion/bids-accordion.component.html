<div class="w-100 mt-20px activity-box-bids">
  <!-- IMAGE -->
  <div class="activity-frame-container-bids">
    <div
      *ngIf="
        nftEntry.PostEntryResponse?.ImageURLs &&
        nftEntry.PostEntryResponse?.ImageURLs[0] &&
        !nftEntry.PostEntryResponse?.ParentStakeID
      "
      class="image-size-active-bids-accordion"
    >
      <img
        (click)="openImgModal($event, nftEntry.PostEntryResponse.ImageURLs[0])"
        data-toggle="modal"
        class="h-100"
        src="{{ mapImageURLs(nftEntry.PostEntryResponse.ImageURLs[0]) }}"
      />
    </div>
    <!-- VIDEO -->
    <div
      *ngIf="nftEntry.PostEntryResponse?.VideoURLs && nftEntry.PostEntryResponse?.VideoURLs[0]"
      class="image-size-active-bids-accordion"
      [ngClass]="{ 'mb-10px': quotedContent && showQuotedContent }"
    >
      <iframe
        [src]="nftEntry.PostEntryResponse.VideoURLs[0] | sanitizeVideoUrl"
        allow="accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;"
        allowfullscreen
        class="feed-post__video"
      ></iframe>
    </div>
  </div>
  <div class="active-bids-bid-info-accordion">
    <label class="fs-12px font-weight-bold mb-0px">HIGHEST BID</label>
    <div class="fs-26px font-weight-bold mt-5px">
      <span>
        {{ globalVars.nanosToUSD(nftEntry.NFTEntryResponses[0].HighestBidAmountNanos, 2) }}
      </span>
    </div>
    <div class="fs-14px">
      <span>{{ globalVars.nanosToDeSo(nftEntry.NFTEntryResponses[0].HighestBidAmountNanos, 5) }} $DESO</span>
    </div>
  </div>
  <div class="d-flex flex-center grid-area-c">
    <button (click)="showAllBids()" class="black-rounded-button small-button-size pl-10px pr-10px pt-5px pb-5px">
      {{ accordionOpen ? "Hide bids" : "Show bids" }}
    </button>
  </div>
  <div class="d-flex flex-center grid-area-d">
    <button
      *ngIf="accordionOpen"
      [disabled]="sellNFTDisabled"
      (click)="sellNFT()"
      class="white-rounded-button small-button-size pl-10px pr-10px pt-5px pb-5px d-flex flex-center"
    >
      Accept bid
    </button>
  </div>
</div>
<div class="bids-received-accordion pl-10px pr-10px" [ngClass]="accordionOpen ? 'open' : ''">
  <div *ngFor="let bidEntry of nftEntry.BidEntryResponses">
    <button
      class="bids-received-bid"
      (click)="checkSelectedBidEntries(bidEntry)"
      [ngClass]="bidEntry.selected ? 'electric-outline' : ''"
    >
      <div class="col-5 d-flex align-items-center mb-0 p-0">
        <!-- Avatar -->
        <div class="simple-profile-card__avatar-container ml-30px">
          <div class="simple-profile-card__avatar br-30px" [avatar]="bidEntry.PublicKeyBase58Check"></div>
        </div>
        <div class="text-truncate holdings__name fs-14px">
          <div class="d-flex">
            <div
              class="fc-default font-weight-bold text-truncate fs-14px"
              style="max-width: 120px"
              [ngClass]="{ 'cursor-pointer': !!bidEntry.ProfileEntryResponse?.Username }"
              [style.pointer-events]="!!bidEntry.ProfileEntryResponse?.Username ? 'auto' : 'none'"
              [routerLink]="
                bidEntry.ProfileEntryResponse?.Username
                  ? ['/' + globalVars.RouteNames.USER_PREFIX, bidEntry.ProfileEntryResponse.Username]
                  : []
              "
            >
              {{ bidEntry.ProfileEntryResponse?.Username || bidEntry.PublicKeyBase58Check }}
            </div>
            <span
              *ngIf="bidEntry.ProfileEntryResponse?.IsVerified"
              (click)="tooltip.toggle()"
              class="ml-1 mb-1 cursor-pointer text-primary"
              matTooltipClass="global__mat-tooltip global__mat-tooltip-font-size"
              [matTooltip]="'This account is verified'"
              #tooltip="matTooltip"
            >
              <i class="fas fa-check-circle fa-md align-middle"></i>
            </span>
          </div>
          <div class="text-grey9" *ngIf="bidEntry.ProfileEntryResponse">
            {{ globalVars.nanosToUSD(bidEntry.ProfileEntryResponse.CoinPriceDeSoNanos, 2) }}
          </div>
        </div>
      </div>
      <div
        class="col-2 d-flex align-items-center justify-content-center mb-0 p-0"
        *ngIf="nftEntry.PostEntryResponse.NumNFTCopies > 1"
      >
        {{ bidEntry.SerialNumber > 0 && "#" + bidEntry.SerialNumber.toString() }}
      </div>
      <div
        class="d-flex align-items-center mb-0 justify-content-around p-0"
        [ngClass]="{
          'col-7': nftEntry.PostEntryResponse.NumNFTCopies == 1,
          'col-5': nftEntry.PostEntryResponse.NumNFTCopies > 1
        }"
      >
        <span>{{ globalVars.nanosToDeSo(bidEntry.BidAmountNanos, 5) }} $DESO</span>
        <span>~{{ globalVars.nanosToUSD(bidEntry.BidAmountNanos, 2) }}</span>
      </div>
    </button>
  </div>
</div>
